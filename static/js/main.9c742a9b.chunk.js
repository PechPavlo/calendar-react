(this["webpackJsonpcalendar-react"]=this["webpackJsonpcalendar-react"]||[]).push([[0],{16:function(e,t,n){},19:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(9),s=n.n(c),i=(n(16),n(2)),o=n.n(i),u=n(4),l=n(3),d=r.a.createContext(null),j=n(11),b=n(0),p=function(e){var t=e.users,n=e.changeUser,r=e.filteredByUser,c=e.changeFilteredByUser,s=e.newEvent,i=e.isAdmin,o=[].concat(Object(j.a)(t.map((function(e){return e.data.name}))),["All"]),u=Object(a.useState)(r),d=Object(l.a)(u,2),p=d[0],h=d[1];return Object(a.useEffect)((function(){h(r)}),[r]),Object(b.jsxs)("div",{className:"main_top-container",children:[Object(b.jsx)("h1",{children:"Calendar-react"}),Object(b.jsxs)("div",{className:"controls",children:[Object(b.jsx)("select",{className:"filtered-by",id:"filter",value:p,onChange:function(e){h(e.target.value),c(e.target.value)},children:o.map((function(e){return Object(b.jsx)("option",{className:"member",value:e,children:"All"===e?"All members":e},"filter-".concat(e))}))}),Object(b.jsx)("button",{className:"change_user-btn",type:"button",onClick:function(){return n()},children:"Change User"}),i&&Object(b.jsx)("button",{className:"add-event-btn",type:"button",onClick:function(){return s()},children:"New event +"})]})]})},h=function(e){var t=Object(a.useContext)(d),n=Object(l.a)(t,4),r=n[0],c=n[1],s=n[2],i=n[3],o=e.dayTime,u=null===r||void 0===r?void 0:r.find((function(e){return e.data.dayTime===o})),j=null===u||void 0===u?void 0:u.data.participants.includes(i);console.log(j);var p=c.data.isAdmin;return u&&(j||"All"===i)?Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"calendar_cell booked","data-cell":o,children:[Object(b.jsx)("span",{className:"calendar_cell-name","data-cell_name":o,children:u.data.eventName}),p&&Object(b.jsx)("button",{className:"calendar_cell-del_btn","data-del_btn":o,type:"button",onClick:function(){return s(u)},children:"\u2716"})]}),Object(b.jsx)("ul",{className:"calendar_cell_participants","data-cell_list":o,children:u.data.participants.map((function(e){return Object(b.jsx)("li",{className:"calendar_cell_participant",children:e},"".concat(o,"-").concat(e))}))})]}):Object(b.jsx)("div",{})},f=function(){var e=["Monday","Tuesday","Wednesday","Thursday","Friday"];return Object(b.jsxs)("table",{className:"calendar",children:[Object(b.jsx)("thead",{children:Object(b.jsx)("tr",{className:"calendar-header",children:["Name"].concat(e).map((function(e){return Object(b.jsx)("th",{className:"calendar_header-item",children:e},"thead-".concat(e))}))})}),Object(b.jsx)("tbody",{children:[10,11,12,13,14,15,16,17,18].map((function(t){return Object(b.jsx)("tr",{className:"calendar-row",children:["Name"].concat(e).map((function(e){return"Name"===e?Object(b.jsx)("td",{className:"calendar_row-item",children:"".concat(t,":00")},"tbody-".concat(t)):Object(b.jsx)("td",{className:"calendar_row-item",draggable:"true","data-time":"".concat(e).concat(t),children:Object(b.jsx)(h,{dayTime:"".concat(e).concat(t)})},"tbody-".concat(e).concat(t))}))},"tbody-tr-".concat(t))}))})]})},v=n(7),m=n(10),O=new function e(){var t=this;if(Object(v.a)(this,e),this.get=function(){var e=Object(u.a)(o.a.mark((function e(n){var a,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n),e.prev=1,e.next=4,fetch(a,{method:"get"});case 4:return c=e.sent,e.next=7,c.json();case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),this.create=function(){var e=Object(u.a)(o.a.mark((function e(n,a){var r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n),e.prev=1,e.next=4,fetch(r,{method:"POST",body:a,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:c=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),this.change=function(){var e=Object(u.a)(o.a.mark((function e(n,a,r){var c,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n,"/").concat(a),e.prev=1,e.next=4,fetch(c,{method:"PUT",body:r,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(u.a)(o.a.mark((function e(n,a){var r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n,"/").concat(a),e.prev=1,e.next=4,fetch(r,{method:"DELETE"});case 4:return c=e.sent,s=c.status,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),e.instance instanceof e)return e.instance;this.settingsObject={URL:"http://158.101.166.74:8080/api/data/",SYSTEM:"pavlo_pechenevskyi"},Object.freeze(this.settingsObject),Object.freeze(this),e.instance=this},x=new(function(){function e(t){Object(v.a)(this,e),this.showErrorMessage=function(e){var t=document.querySelector("#error-modal");document.querySelector(".error_modal-subtitle").textContent=e,t.classList.add("active")},this.service=t}return Object(m.a)(e,[{key:"get",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.get(t);case 2:return n=e.sent,a=null,n&&n.error&&this.showErrorMessage("in ".concat(t,": ").concat(n.error)),n&&(a=n.map((function(e){return{id:e.id,data:JSON.parse(e.data.replaceAll('\\"','"'))}}))),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,this.service.create(t,'{"data":"'.concat(JSON.stringify(n).replaceAll('"','\\"'),'"}'));case 3:return(r=e.sent).error&&this.showErrorMessage("in ".concat(t,": ").concat(r.error)),a.id=r.id,a.data=JSON.parse(r.data.replaceAll('\\"','"')),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"change",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,a){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,this.service.change(t,n,'{"data":"'.concat(JSON.stringify(a).replaceAll('"','\\"'),'"}'));case 3:return(c=e.sent).error&&this.showErrorMessage("in ".concat(t,": ").concat(c.error)),r.id=c.id,r.data=JSON.parse(c.data.replaceAll('\\"','"')),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.delete(t,n);case 2:return(a=e.sent).error&&this.showErrorMessage("in ".concat(t,": ").concat(a.error)),console.log(a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}())(O),y=function(e){var t=e.users,n=e.currentUser,r=e.setAuthorizedUser,c=Object(a.useState)(n.data.name),s=Object(l.a)(c,2),i=s[0],o=s[1];Object(a.useEffect)((function(){o(n.data.name)}),[n]);return Object(b.jsx)("div",{className:"modal_wrapper active",id:"authorize-modal",children:Object(b.jsxs)("div",{className:"authorize_modal-container",children:[Object(b.jsx)("span",{className:"authorize_modal-title",children:"Please authorize"}),Object(b.jsx)("select",{className:"autorized-by",value:i,onChange:function(e){o(e.target.value)},children:null===t||void 0===t?void 0:t.map((function(e){return Object(b.jsx)("option",{className:"user",value:e.data.name,children:e.data.name},e.id)}))}),Object(b.jsx)("div",{className:"authorize_modal-footer",children:Object(b.jsx)("button",{className:"confirm_authorize_modal-btn",id:"confirm_user",type:"button",onClick:function(){return r(i)},children:"Confirm"})})]})})},g=function(e){var t=e.eventToDelete,n=e.setIsEventsUpdated,r=Object(a.useContext)(d),c=Object(l.a)(r,3),s=(c[0],c[1],c[2]),i=function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("no_delete"!==a.target.id&&"delete-modal"!==a.target.id||s(null),"yes_delete"!==a.target.id){e.next=6;break}return e.next=4,x.delete("events",t.id);case 4:n(!1),s(null);case 6:console.log("eventToDelete",a.target.id,t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"modal_wrapper active",id:"delete-modal",onClick:i,children:Object(b.jsxs)("div",{className:"delete_modal-container",children:[Object(b.jsx)("span",{className:"delete_modal-title",children:"Are you sure you want to delete"}),Object(b.jsx)("span",{className:"delete_modal-subtitle",children:'"'.concat(t.data.eventName,'" event?')}),Object(b.jsxs)("div",{className:"delete_modal-footer",children:[Object(b.jsx)("button",{className:"no_delete_event-btn",type:"button",id:"no_delete",onClick:i,children:"No"}),Object(b.jsx)("button",{className:"yes_delete_event-btn",type:"button",id:"yes_delete",onClick:i,children:"Yes"})]})]})})};var N=function(){var e=[{id:"a6a136dc-fd2b-4073-a1ae-214589cc73e6",data:{isAdmin:!0,name:"test",password:""}}],t=Object(a.useState)([].concat(e)),n=Object(l.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)([]),i=Object(l.a)(s,2),j=i[0],h=i[1],v=Object(a.useState)(null),m=Object(l.a)(v,2),O=m[0],N=m[1],w=Object(a.useState)(!1),_=Object(l.a)(w,2),k=_[0],S=_[1],E=Object(a.useState)(!1),A=Object(l.a)(E,2),U=A[0],C=A[1],T=Object(a.useState)(!0),M=Object(l.a)(T,2),z=M[0],L=M[1],J=Object(a.useState)(e[0]),Y=Object(l.a)(J,2),B=Y[0],R=Y[1],D=Object(a.useState)("All"),P=Object(l.a)(D,2),F=P[0],I=P[1],q=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("users");case 2:t=e.sent,R(t[0]),c(t),C(!0),L(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.get("events");case 2:t=e.sent,h(t),S(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){U||q()}),[U]),Object(a.useEffect)((function(){k||W()}),[k]),U?Object(b.jsxs)(d.Provider,{value:[j,B,N,F],children:[!z&&Object(b.jsx)(y,{users:r,currentUser:B,setAuthorizedUser:function(e){L(!0),R(r.find((function(t){return t.data.name===e})))}}),O&&Object(b.jsx)(g,{eventToDelete:O,setIsEventsUpdated:S}),Object(b.jsx)(p,{isAdmin:B.data.isAdmin,users:r,changeUser:function(){L(!1)},changeFilteredByUser:function(e){I(e)},newEvent:function(){console.log("New Event")},filteredByUser:F}),Object(b.jsx)(f,{})]}):Object(b.jsxs)("div",{children:[Object(b.jsx)("p",{children:"Loading ..."}),Object(b.jsx)("span",{className:"loading-ring"})]})};s.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(N,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.9c742a9b.chunk.js.map