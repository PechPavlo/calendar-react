(this["webpackJsonpcalendar-react"]=this["webpackJsonpcalendar-react"]||[]).push([[0],{29:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(9),s=n.n(r),i=n(2),o=n(10),d=n(5),u=function(e,t){switch(t.type){case"UPDATE_MY_EVENTS":return Object(d.a)(Object(d.a)({},e),{},{myEvents:t.payload});case"UPDATE_FILTERED_BY":return Object(d.a)(Object(d.a)({},e),{},{filteredByUser:t.payload});case"UPDATE_USERS":return Object(d.a)(Object(d.a)({},e),{},{users:t.payload});case"UPDATE_IS_AUTHORIZED":return Object(d.a)(Object(d.a)({},e),{},{isAuthorized:t.payload});case"UPDATE_EVENT_TO_ADD":return Object(d.a)(Object(d.a)({},e),{},{eventToAdd:t.payload});case"UPDATE_EVENT_TO_DELETE":return Object(d.a)(Object(d.a)({},e),{},{eventToDelete:t.payload});case"UPDATE_IS_EVENTS_UPDATED":return Object(d.a)(Object(d.a)({},e),{},{isEventsUpdated:t.payload});case"UPDATE_CURRENT_USER":return Object(d.a)(Object(d.a)({},e),{},{currentUser:t.payload});default:return Object(d.a)({},e)}},l=[{id:"a6a136dc-fd2b-4073-a1ae-214589cc73e6",data:{isAdmin:!0,name:"test",password:""}}],b={title:"Custom title",myEvents:[],users:[].concat(l),currentUser:l[0],filteredByUser:"All",isAuthorized:!0,eventToAdd:null,eventToDelete:null,isEventsUpdated:!1},j=Object(o.b)(u,b,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),p=(n(29),n(3)),O=n.n(p),f=n(6),m=n(4),h=function(e){return{type:"UPDATE_MY_EVENTS",payload:e}},v=function(e){return{type:"UPDATE_CURRENT_USER",payload:e}},x=function(e){return{type:"UPDATE_IS_AUTHORIZED",payload:e}},_=function(e){return{type:"UPDATE_EVENT_TO_ADD",payload:e}},y=function(e){return{type:"UPDATE_EVENT_TO_DELETE",payload:e}},E=function(e){return{type:"UPDATE_IS_EVENTS_UPDATED",payload:e}},N=n(18),T=n(0),w=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.users})),n=Object(i.c)((function(e){return e.currentUser.data.isAdmin})),c=Object(i.c)((function(e){return e.filteredByUser})),r=[].concat(Object(N.a)(t.map((function(e){return e.data.name}))),["All"]),s=Object(a.useState)(c),o=Object(m.a)(s,2),d=o[0],u=o[1];return Object(a.useEffect)((function(){u(c)}),[c]),Object(T.jsxs)("div",{className:"main_top-container",children:[Object(T.jsx)("h1",{children:"Calendar-react"}),Object(T.jsxs)("div",{className:"controls",children:[Object(T.jsx)("select",{className:"filtered-by",id:"filter",value:d,onChange:function(t){u(t.target.value),e({type:"UPDATE_FILTERED_BY",payload:t.target.value})},children:r.map((function(e){return Object(T.jsx)("option",{className:"member",value:e,children:"All"===e?"All members":e},"filter-".concat(e))}))}),Object(T.jsx)("button",{className:"change_user-btn",type:"button",onClick:function(){return e(x(!1))},children:"Change User"}),n&&Object(T.jsx)("button",{className:"add-event-btn",type:"button",onClick:function(){return e(_("some"))},children:"New event +"})]})]})},g=(n(32),n(7)),S=n(17),k=new function e(){var t=this;if(Object(g.a)(this,e),this.get=function(){var e=Object(f.a)(O.a.mark((function e(n){var a,c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n),e.prev=1,e.next=4,fetch(a,{method:"get"});case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),this.create=function(){var e=Object(f.a)(O.a.mark((function e(n,a){var c,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n),e.prev=1,e.next=4,fetch(c,{method:"POST",body:a,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),this.change=function(){var e=Object(f.a)(O.a.mark((function e(n,a,c){var r,s,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n,"/").concat(a),e.prev=1,e.next=4,fetch(r,{method:"PUT",body:c,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(f.a)(O.a.mark((function e(n,a){var c,r,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n,"/").concat(a),e.prev=1,e.next=4,fetch(c,{method:"DELETE"});case 4:return r=e.sent,s=r.status,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),e.instance instanceof e)return e.instance;this.settingsObject={URL:"http://158.101.166.74:8080/api/data/",SYSTEM:"pavlo_pechenevskyi"},Object.freeze(this.settingsObject),Object.freeze(this),e.instance=this},U=new(function(){function e(t){Object(g.a)(this,e),this.showErrorMessage=function(e){var t=document.querySelector("#error-modal");document.querySelector(".error_modal-subtitle").textContent=e,t.classList.add("active")},this.service=t}return Object(S.a)(e,[{key:"get",value:function(){var e=Object(f.a)(O.a.mark((function e(t){var n,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.get(t);case 2:if(n=e.sent,a=null,!n||!n.error){e.next=6;break}return e.abrupt("return",n);case 6:return n&&(a=n.map((function(e){return{id:e.id,data:JSON.parse(e.data.replaceAll('\\"','"'))}}))),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,this.service.create(t,'{"data":"'.concat(JSON.stringify(n).replaceAll('"','\\"'),'"}'));case 3:if(!(c=e.sent).error){e.next=6;break}return e.abrupt("return",c);case 6:return a.id=c.id,a.data=JSON.parse(c.data.replaceAll('\\"','"')),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"change",value:function(){var e=Object(f.a)(O.a.mark((function e(t,n,a){var c,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},e.next=3,this.service.change(t,n,'{"data":"'.concat(JSON.stringify(a).replaceAll('"','\\"'),'"}'));case 3:if(!(r=e.sent).error){e.next=6;break}return e.abrupt("return",r);case 6:return c.id=r.id,c.data=JSON.parse(r.data.replaceAll('\\"','"')),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(f.a)(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.delete(t,n);case 2:return(a=e.sent).error,console.log(a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}())(k),A=function e(t,n,a,c){Object(g.a)(this,e),this.day=t,this.time=n,this.dayTime="".concat(t).concat(n),this.eventName=a,this.participants=c},D=function(e){var t=e.users,n=e.setMembersList,c=Object(a.useState)(!1),r=Object(m.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)({}),d=Object(m.a)(o,2),u=d[0],l=d[1],b=Object(a.useState)([]),j=Object(m.a)(b,2),p=j[0],O=j[1],f=t.map((function(e){return e.data.name})),h=u;Object(a.useEffect)((function(){l(h),f.forEach((function(e){h[e]=!1}))}),[]);var v=function(e){h[e.target.value]=e.target.checked,l(h);var t=f.filter((function(e){return h[e]}));O(t)};return Object(T.jsxs)("div",{className:"add_dropdown ".concat(s&&"active"),"data-drop":"down",children:[Object(T.jsxs)("div",{className:"add_dropdown-main","data-drop":"down",onClick:function(){i(!s),n(p)},children:[Object(T.jsx)("span",{className:"add_dropdown-selected","data-drop":"down",children:p.length?p.join(", "):"chose participants"}),Object(T.jsx)("select",{className:"add_dropdown-fake_select","data-drop":"down"})]}),Object(T.jsx)("div",{className:"add_dropdown-content","data-drop":"down",children:f.map((function(e){return Object(T.jsxs)("label",{className:"member","data-drop":"down",children:["All"===e?"All members":e,Object(T.jsx)("input",{className:"member-selected-to-add",type:"checkbox",value:e,"data-drop":"down",checked:p.includes(e),onChange:v})]})}))})]})},C=function(){var e=["Monday","Tuesday","Wednesday","Thursday","Friday"],t=[10,11,12,13,14,15,16,17,18],n=Object(i.b)(),c=Object(i.c)((function(e){return e.users})),r=Object(i.c)((function(e){return e.myEvents})),s=Object(a.useState)(!0),o=Object(m.a)(s,2),d=o[0],u=o[1],l=Object(a.useState)(!1),b=Object(m.a)(l,2),j=b[0],p=b[1],h=Object(a.useState)(e[0]),v=Object(m.a)(h,2),x=v[0],y=v[1],N=Object(a.useState)(t[0]),w=Object(m.a)(N,2),g=w[0],S=w[1],k=Object(a.useState)(""),C=Object(m.a)(k,2),P=C[0],R=C[1],L=Object(a.useState)([]),M=Object(m.a)(L,2),z=M[0],V=M[1],I=function(){var e=Object(f.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"cancel_add"!==t.target.id&&"add-modal"!==t.target.id){e.next=5;break}n(_(null)),e.next=13;break;case 5:if(!r.find((function(e){return e.data.dayTime==="".concat(x).concat(g)}))){e.next=9;break}u(!1),e.next=13;break;case 9:return e.next=11,U.create("events",new A(x,g,P,z));case 11:e.sent.error||(p(!0),setTimeout((function(){n(_(null)),n(E(!1)),p(!1)}),3e3));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsx)("div",{className:"modal_wrapper active",id:"add-modal",children:Object(T.jsxs)("div",{className:"add_modal-container",children:[Object(T.jsxs)("div",{className:"add_modal-error ".concat(!d&&"booked"),children:[Object(T.jsx)("span",{children:"Failed to create an event. Time slot is already booked."}),Object(T.jsx)("button",{id:"add_modal-error_btn",onClick:function(){return u(!0)}})]}),Object(T.jsx)("div",{className:"add_modal-no-error ".concat(j&&"booked"),children:Object(T.jsx)("span",{children:"The new event has succesfuly created."})}),Object(T.jsxs)("form",{id:"add-form",onSubmit:I,children:[Object(T.jsxs)("label",{className:"add_lable",children:["Name of the event:",Object(T.jsx)("input",{className:"add_form-name",id:"new_event-name",placeholder:"Event name",type:"text",required:!0,minLength:"1",maxLength:"25",onChange:function(e){return R(e.target.value)}})]}),Object(T.jsxs)("label",{className:"add_lable",htmlFor:"add_select",children:["Participants:",Object(T.jsx)(D,{users:c,setMembersList:V}),Object(T.jsx)("input",{id:"add_select",form:"add-form",required:!0,"data-drop":"down",value:z.length?z.join(", "):""})]}),Object(T.jsxs)("label",{className:"add_lable",children:["Day:",Object(T.jsx)("select",{className:"add_day",defaultValue:x,onChange:function(e){return y(e.target.value)},children:e.map((function(e){return Object(T.jsx)("option",{className:"day",value:e,children:e},"new-day-".concat(e))}))})]}),Object(T.jsxs)("label",{className:"add_lable",children:["Time:",Object(T.jsx)("select",{className:"add_time",defaultValue:g,onChange:function(e){return S(e.target.value)},children:t.map((function(e){return Object(T.jsx)("option",{className:"time",value:e,children:"".concat(e,":00")},"new-time-".concat(e))}))})]})]}),Object(T.jsxs)("div",{className:"add_modal-footer",children:[Object(T.jsx)("button",{className:"cancel_add_event-btn",id:"cancel_add",onClick:I,children:"Cancel"}),Object(T.jsx)("button",{className:"create_add_event-btn",id:"create_add",form:"add-form",type:"submit",children:"Create"})]})]})})},P=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.filteredByUser})),a=Object(i.c)((function(e){return e.currentUser})),c=Object(i.c)((function(e){return e.myEvents})),r=e.dayTime,s=null===c||void 0===c?void 0:c.find((function(e){return e.data.dayTime===r})),o=null===s||void 0===s?void 0:s.data.participants.includes(n),d=a.data.isAdmin;return s&&(o||"All"===n)?Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"calendar_cell booked","data-cell":r,children:[Object(T.jsx)("span",{className:"calendar_cell-name","data-cell_name":r,children:s.data.eventName}),d&&Object(T.jsx)("button",{className:"calendar_cell-del_btn","data-del_btn":r,type:"button",onClick:function(){return t(y(s))},children:"\u2716"})]}),Object(T.jsx)("ul",{className:"calendar_cell_participants","data-cell_list":r,children:s.data.participants.map((function(e){return Object(T.jsx)("li",{className:"calendar_cell_participant",children:e},"".concat(r,"-").concat(e))}))})]}):Object(T.jsx)("div",{})},R=function(){var e=["Monday","Tuesday","Wednesday","Thursday","Friday"];return Object(T.jsxs)("table",{className:"calendar",children:[Object(T.jsx)("thead",{children:Object(T.jsx)("tr",{className:"calendar-header",children:["Name"].concat(e).map((function(e){return Object(T.jsx)("th",{className:"calendar_header-item",children:e},"thead-".concat(e))}))})}),Object(T.jsx)("tbody",{children:[10,11,12,13,14,15,16,17,18].map((function(t){return Object(T.jsx)("tr",{className:"calendar-row",children:["Name"].concat(e).map((function(e){return"Name"===e?Object(T.jsx)("td",{className:"calendar_row-item",children:"".concat(t,":00")},"tbody-".concat(t)):Object(T.jsx)("td",{className:"calendar_row-item",draggable:"true","data-time":"".concat(e).concat(t),children:Object(T.jsx)(P,{dayTime:"".concat(e).concat(t)})},"tbody-".concat(e).concat(t))}))},"tbody-tr-".concat(t))}))})]})},L=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.users})),n=Object(i.c)((function(e){return e.currentUser})),c=Object(a.useState)(n.data.name),r=Object(m.a)(c,2),s=r[0],o=r[1];Object(a.useEffect)((function(){o(n.data.name)}),[n]);return Object(T.jsx)("div",{className:"modal_wrapper active",id:"authorize-modal",children:Object(T.jsxs)("div",{className:"authorize_modal-container",children:[Object(T.jsx)("span",{className:"authorize_modal-title",children:"Please authorize"}),Object(T.jsx)("select",{className:"autorized-by",value:s,onChange:function(e){o(e.target.value)},children:null===t||void 0===t?void 0:t.map((function(e){return Object(T.jsx)("option",{className:"user",value:e.data.name,children:e.data.name},e.id)}))}),Object(T.jsx)("div",{className:"authorize_modal-footer",children:Object(T.jsx)("button",{className:"confirm_authorize_modal-btn",id:"confirm_user",type:"button",onClick:function(){return n=s,e(x(!0)),void e(v(t.find((function(e){return e.data.name===n}))));var n},children:"Confirm"})})]})})},M=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.eventToDelete})),n=Object(a.useState)(!1),c=Object(m.a)(n,2),r=c[0],s=c[1],o=function(){var n=Object(f.a)(O.a.mark((function n(a){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("no_delete"!==a.target.id&&"delete-modal"!==a.target.id||e(y(null)),"yes_delete"!==a.target.id){n.next=6;break}return n.next=4,U.delete("events",t.id);case 4:n.sent.error||(s(!0),setTimeout((function(){e(E(!1)),e(y(null)),s(!1)}),3e3));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(T.jsx)("div",{className:"modal_wrapper active",id:"delete-modal",onClick:o,children:Object(T.jsxs)("div",{className:"delete_modal-container",children:[!r&&Object(T.jsx)("span",{className:"delete_modal-title",children:"Are you sure you want to delete"}),!r&&Object(T.jsx)("span",{className:"delete_modal-subtitle",children:'"'.concat(t.data.eventName,'" event?')}),r&&Object(T.jsx)("div",{className:"add_modal-no-error ".concat(r&&"booked"),children:Object(T.jsx)("span",{children:"The event has succesfuly deleted."})}),Object(T.jsxs)("div",{className:"delete_modal-footer",children:[Object(T.jsx)("button",{className:"no_delete_event-btn",type:"button",id:"no_delete",onClick:o,children:"No"}),Object(T.jsx)("button",{className:"yes_delete_event-btn",type:"button",id:"yes_delete",onClick:o,children:"Yes"})]})]})})};var z=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.isAuthorized})),n=Object(i.c)((function(e){return e.eventToAdd})),c=Object(i.c)((function(e){return e.eventToDelete})),r=Object(i.c)((function(e){return e.isEventsUpdated})),s=Object(a.useState)(!1),o=Object(m.a)(s,2),d=o[0],u=o[1],l=function(){var t=Object(f.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.get("users");case 2:n=t.sent,e(v(n[0])),e({type:"UPDATE_USERS",payload:n}),u(!0),e(x(!1));case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),b=function(){var t=Object(f.a)(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U.get("events");case 2:n=t.sent,e(h(n)),e(E(!0));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){d||l()}),[d]),Object(a.useEffect)((function(){r||b()}),[r]),d?Object(T.jsxs)("div",{children:[!t&&Object(T.jsx)(L,{}),c&&Object(T.jsx)(M,{}),n&&Object(T.jsx)(C,{}),Object(T.jsx)(w,{}),Object(T.jsx)(R,{})]}):Object(T.jsxs)("div",{children:[Object(T.jsx)("p",{children:"Loading ..."}),Object(T.jsx)("span",{className:"loading-ring"})]})};s.a.render(Object(T.jsx)(c.a.StrictMode,{children:Object(T.jsx)(i.a,{store:j,children:Object(T.jsx)(z,{})})}),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.0c0148da.chunk.js.map