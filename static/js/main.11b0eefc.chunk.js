(this["webpackJsonpcalendar-react"]=this["webpackJsonpcalendar-react"]||[]).push([[0],{30:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(10),s=n.n(r),i=n(2),o=n(8),d=n(17),u=n(4),l=function(e,t){switch(t.type){case"GET_USERS_STARTED":return Object(u.a)(Object(u.a)({},e),{},{isUsersUpdated:!1,error:null});case"GET_USERS_SUCCESS":return Object(u.a)(Object(u.a)({},e),{},{isUsersUpdated:!0,isAuthorized:!1,currentUser:t.payload[0],users:t.payload});case"GET_USERS_FAILURE":return Object(u.a)(Object(u.a)({},e),{},{isUsersUpdated:!0,error:t.payload.error});case"UPDATE_MY_EVENTS":return Object(u.a)(Object(u.a)({},e),{},{myEvents:t.payload});case"UPDATE_FILTERED_BY":return Object(u.a)(Object(u.a)({},e),{},{filteredByUser:t.payload});case"UPDATE_USERS":return Object(u.a)(Object(u.a)({},e),{},{users:t.payload});case"UPDATE_IS_AUTHORIZED":return Object(u.a)(Object(u.a)({},e),{},{isAuthorized:t.payload});case"UPDATE_EVENT_TO_ADD":return Object(u.a)(Object(u.a)({},e),{},{eventToAdd:t.payload});case"UPDATE_EVENT_TO_DELETE":return Object(u.a)(Object(u.a)({},e),{},{eventToDelete:t.payload});case"UPDATE_IS_EVENTS_UPDATED":return Object(u.a)(Object(u.a)({},e),{},{isEventsUpdated:t.payload});case"UPDATE_CURRENT_USER":return Object(u.a)(Object(u.a)({},e),{},{currentUser:t.payload});default:return Object(u.a)({},e)}},b=[{id:"a6a136dc-fd2b-4073-a1ae-214589cc73e6",data:{isAdmin:!0,name:"test",password:""}}],j={title:"Custom title",myEvents:[],users:[].concat(b),currentUser:b[0],filteredByUser:"All",isAuthorized:!0,eventToAdd:null,eventToDelete:null,isEventsUpdated:!1,isUsersUpdated:!1,error:null},p=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):o.c)(Object(o.a)(d.a)),O=Object(o.d)(l,j,p),f=(n(30),n(3)),h=n.n(f),m=n(6),v=function(e){return{type:"UPDATE_MY_EVENTS",payload:e}},_=function(e){return{type:"UPDATE_IS_AUTHORIZED",payload:e}},x=function(e){return{type:"UPDATE_EVENT_TO_ADD",payload:e}},y=function(e){return{type:"UPDATE_EVENT_TO_DELETE",payload:e}},E=function(e){return{type:"UPDATE_IS_EVENTS_UPDATED",payload:e}},N=n(5),T=n(19),S=n(0),U=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.users})),n=Object(i.c)((function(e){return e.currentUser.data.isAdmin})),c=Object(i.c)((function(e){return e.filteredByUser})),r=[].concat(Object(T.a)(t.map((function(e){return e.data.name}))),["All"]),s=Object(a.useState)(c),o=Object(N.a)(s,2),d=o[0],u=o[1];return Object(a.useEffect)((function(){u(c)}),[c]),Object(S.jsxs)("div",{className:"main_top-container",children:[Object(S.jsx)("h1",{children:"Calendar-react"}),Object(S.jsxs)("div",{className:"controls",children:[Object(S.jsx)("select",{className:"filtered-by",id:"filter",value:d,onChange:function(t){u(t.target.value),e({type:"UPDATE_FILTERED_BY",payload:t.target.value})},children:r.map((function(e){return Object(S.jsx)("option",{className:"member",value:e,children:"All"===e?"All members":e},"filter-".concat(e))}))}),Object(S.jsx)("button",{className:"change_user-btn",type:"button",onClick:function(){return e(_(!1))},children:"Change User"}),n&&Object(S.jsx)("button",{className:"add-event-btn",type:"button",onClick:function(){return e(x("some"))},children:"New event +"})]})]})},w=(n(33),n(7)),g=n(18),A=new function e(){var t=this;if(Object(w.a)(this,e),this.get=function(){var e=Object(m.a)(h.a.mark((function e(n){var a,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n),e.prev=1,e.next=4,fetch(a,{method:"get"});case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),this.create=function(){var e=Object(m.a)(h.a.mark((function e(n,a){var c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n),e.prev=1,e.next=4,fetch(c,{method:"POST",body:a,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}(),this.change=function(){var e=Object(m.a)(h.a.mark((function e(n,a,c){var r,s,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n,"/").concat(a),e.prev=1,e.next=4,fetch(r,{method:"PUT",body:c,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(m.a)(h.a.mark((function e(n,a){var c,r,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(n,"/").concat(a),e.prev=1,e.next=4,fetch(c,{method:"DELETE"});case 4:return r=e.sent,s=r.status,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}(),e.instance instanceof e)return e.instance;this.settingsObject={URL:"http://158.101.166.74:8080/api/data/",SYSTEM:"pavlo_pechenevskyi"},Object.freeze(this.settingsObject),Object.freeze(this),e.instance=this},k=new(function(){function e(t){Object(w.a)(this,e),this.showErrorMessage=function(e){var t=document.querySelector("#error-modal");document.querySelector(".error_modal-subtitle").textContent=e,t.classList.add("active")},this.service=t}return Object(g.a)(e,[{key:"get",value:function(){var e=Object(m.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.get(t);case 2:if(n=e.sent,a=null,!n||!n.error){e.next=6;break}return e.abrupt("return",n);case 6:return n&&(a=n.map((function(e){return{id:e.id,data:JSON.parse(e.data.replaceAll('\\"','"'))}}))),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(m.a)(h.a.mark((function e(t,n){var a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},e.next=3,this.service.create(t,'{"data":"'.concat(JSON.stringify(n).replaceAll('"','\\"'),'"}'));case 3:if(!(c=e.sent).error){e.next=6;break}return e.abrupt("return",c);case 6:return a.id=c.id,a.data=JSON.parse(c.data.replaceAll('\\"','"')),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"change",value:function(){var e=Object(m.a)(h.a.mark((function e(t,n,a){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},e.next=3,this.service.change(t,n,'{"data":"'.concat(JSON.stringify(a).replaceAll('"','\\"'),'"}'));case 3:if(!(r=e.sent).error){e.next=6;break}return e.abrupt("return",r);case 6:return c.id=r.id,c.data=JSON.parse(r.data.replaceAll('\\"','"')),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(m.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.delete(t,n);case 2:return(a=e.sent).error,console.log(a),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}())(A),D=function e(t,n,a,c){Object(w.a)(this,e),this.day=t,this.time=n,this.dayTime="".concat(t).concat(n),this.eventName=a,this.participants=c},C=function(e){var t=e.users,n=e.setMembersList,c=Object(a.useState)(!1),r=Object(N.a)(c,2),s=r[0],i=r[1],o=Object(a.useState)({}),d=Object(N.a)(o,2),u=d[0],l=d[1],b=Object(a.useState)([]),j=Object(N.a)(b,2),p=j[0],O=j[1],f=t.map((function(e){return e.data.name})),h=u;Object(a.useEffect)((function(){l(h),f.forEach((function(e){h[e]=!1}))}),[]);var m=function(e){h[e.target.value]=e.target.checked,l(h);var t=f.filter((function(e){return h[e]}));O(t)};return Object(S.jsxs)("div",{className:"add_dropdown ".concat(s&&"active"),"data-drop":"down",children:[Object(S.jsxs)("div",{className:"add_dropdown-main","data-drop":"down",onClick:function(){i(!s),n(p)},children:[Object(S.jsx)("span",{className:"add_dropdown-selected","data-drop":"down",children:p.length?p.join(", "):"chose participants"}),Object(S.jsx)("select",{className:"add_dropdown-fake_select","data-drop":"down"})]}),Object(S.jsx)("div",{className:"add_dropdown-content","data-drop":"down",children:f.map((function(e){return Object(S.jsxs)("label",{className:"member","data-drop":"down",children:["All"===e?"All members":e,Object(S.jsx)("input",{className:"member-selected-to-add",type:"checkbox",value:e,"data-drop":"down",checked:p.includes(e),onChange:m})]},"drop-".concat(e))}))})]})},R=function(){var e=["Monday","Tuesday","Wednesday","Thursday","Friday"],t=[10,11,12,13,14,15,16,17,18],n=Object(i.b)(),c=Object(i.c)((function(e){return e.users})),r=Object(i.c)((function(e){return e.myEvents})),s=Object(a.useState)(!0),o=Object(N.a)(s,2),d=o[0],u=o[1],l=Object(a.useState)(!1),b=Object(N.a)(l,2),j=b[0],p=b[1],O=Object(a.useState)(e[0]),f=Object(N.a)(O,2),v=f[0],_=f[1],y=Object(a.useState)(t[0]),T=Object(N.a)(y,2),U=T[0],w=T[1],g=Object(a.useState)(""),A=Object(N.a)(g,2),R=A[0],P=A[1],L=Object(a.useState)([]),M=Object(N.a)(L,2),z=M[0],I=M[1],V=function(){var e=Object(m.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"cancel_add"!==t.target.id&&"add-modal"!==t.target.id){e.next=5;break}n(x(null)),e.next=13;break;case 5:if(!r.find((function(e){return e.data.dayTime==="".concat(v).concat(U)}))){e.next=9;break}u(!1),e.next=13;break;case 9:return e.next=11,k.create("events",new D(v,U,R,z));case 11:e.sent.error||(p(!0),setTimeout((function(){n(x(null)),n(E(!1)),p(!1)}),3e3));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"modal_wrapper active",id:"add-modal",children:Object(S.jsxs)("div",{className:"add_modal-container",children:[Object(S.jsxs)("div",{className:"add_modal-error ".concat(!d&&"booked"),children:[Object(S.jsx)("span",{children:"Failed to create an event. Time slot is already booked."}),Object(S.jsx)("button",{id:"add_modal-error_btn",onClick:function(){return u(!0)}})]}),Object(S.jsx)("div",{className:"add_modal-no-error ".concat(j&&"booked"),children:Object(S.jsx)("span",{children:"The new event has succesfuly created."})}),Object(S.jsxs)("form",{id:"add-form",onSubmit:V,children:[Object(S.jsxs)("label",{className:"add_lable",children:["Name of the event:",Object(S.jsx)("input",{className:"add_form-name",id:"new_event-name",placeholder:"Event name",type:"text",required:!0,minLength:"1",maxLength:"25",onChange:function(e){return P(e.target.value)}})]}),Object(S.jsxs)("label",{className:"add_lable",htmlFor:"add_select",children:["Participants:",Object(S.jsx)(C,{users:c,setMembersList:I}),Object(S.jsx)("input",{id:"add_select",form:"add-form",required:!0,"data-drop":"down",value:z.length?z.join(", "):"",onChange:function(e){return console.log(e.target.value)}})]}),Object(S.jsxs)("label",{className:"add_lable",children:["Day:",Object(S.jsx)("select",{className:"add_day",defaultValue:v,onChange:function(e){return _(e.target.value)},children:e.map((function(e){return Object(S.jsx)("option",{className:"day",value:e,children:e},"new-day-".concat(e))}))})]}),Object(S.jsxs)("label",{className:"add_lable",children:["Time:",Object(S.jsx)("select",{className:"add_time",defaultValue:U,onChange:function(e){return w(e.target.value)},children:t.map((function(e){return Object(S.jsx)("option",{className:"time",value:e,children:"".concat(e,":00")},"new-time-".concat(e))}))})]})]}),Object(S.jsxs)("div",{className:"add_modal-footer",children:[Object(S.jsx)("button",{className:"cancel_add_event-btn",id:"cancel_add",onClick:V,children:"Cancel"}),Object(S.jsx)("button",{className:"create_add_event-btn",id:"create_add",form:"add-form",type:"submit",children:"Create"})]})]})})},P=function(e){var t=Object(i.b)(),n=Object(i.c)((function(e){return e.filteredByUser})),a=Object(i.c)((function(e){return e.currentUser})),c=Object(i.c)((function(e){return e.myEvents})),r=e.dayTime,s=null===c||void 0===c?void 0:c.find((function(e){return e.data.dayTime===r})),o=null===s||void 0===s?void 0:s.data.participants.includes(n),d=a.data.isAdmin;return s&&(o||"All"===n)?Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"calendar_cell booked","data-cell":r,children:[Object(S.jsx)("span",{className:"calendar_cell-name","data-cell_name":r,children:s.data.eventName}),d&&Object(S.jsx)("button",{className:"calendar_cell-del_btn","data-del_btn":r,type:"button",onClick:function(){return t(y(s))},children:"\u2716"})]}),Object(S.jsx)("ul",{className:"calendar_cell_participants","data-cell_list":r,children:s.data.participants.map((function(e){return Object(S.jsx)("li",{className:"calendar_cell_participant",children:e},"".concat(r,"-").concat(e))}))})]}):Object(S.jsx)("div",{})},L=function(){var e=["Monday","Tuesday","Wednesday","Thursday","Friday"];return Object(S.jsxs)("table",{className:"calendar",children:[Object(S.jsx)("thead",{children:Object(S.jsx)("tr",{className:"calendar-header",children:["Name"].concat(e).map((function(e){return Object(S.jsx)("th",{className:"calendar_header-item",children:e},"thead-".concat(e))}))})}),Object(S.jsx)("tbody",{children:[10,11,12,13,14,15,16,17,18].map((function(t){return Object(S.jsx)("tr",{className:"calendar-row",children:["Name"].concat(e).map((function(e){return"Name"===e?Object(S.jsx)("td",{className:"calendar_row-item",children:"".concat(t,":00")},"tbody-".concat(t)):Object(S.jsx)("td",{className:"calendar_row-item",draggable:"true","data-time":"".concat(e).concat(t),children:Object(S.jsx)(P,{dayTime:"".concat(e).concat(t)})},"tbody-".concat(e).concat(t))}))},"tbody-tr-".concat(t))}))})]})},M=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.users})),n=Object(i.c)((function(e){return e.currentUser})),c=Object(a.useState)(n.data.name),r=Object(N.a)(c,2),s=r[0],o=r[1];Object(a.useEffect)((function(){o(n.data.name)}),[n]);return Object(S.jsx)("div",{className:"modal_wrapper active",id:"authorize-modal",children:Object(S.jsxs)("div",{className:"authorize_modal-container",children:[Object(S.jsx)("span",{className:"authorize_modal-title",children:"Please authorize"}),Object(S.jsx)("select",{className:"autorized-by",value:s,onChange:function(e){o(e.target.value)},children:null===t||void 0===t?void 0:t.map((function(e){return Object(S.jsx)("option",{className:"user",value:e.data.name,children:e.data.name},e.id)}))}),Object(S.jsx)("div",{className:"authorize_modal-footer",children:Object(S.jsx)("button",{className:"confirm_authorize_modal-btn",id:"confirm_user",type:"button",onClick:function(){return n=s,e(_(!0)),void e({type:"UPDATE_CURRENT_USER",payload:t.find((function(e){return e.data.name===n}))});var n},children:"Confirm"})})]})})},z=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.eventToDelete})),n=Object(a.useState)(!1),c=Object(N.a)(n,2),r=c[0],s=c[1],o=function(){var n=Object(m.a)(h.a.mark((function n(a){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("no_delete"!==a.target.id&&"delete-modal"!==a.target.id||e(y(null)),"yes_delete"!==a.target.id){n.next=6;break}return n.next=4,k.delete("events",t.id);case 4:n.sent.error||(s(!0),setTimeout((function(){e(E(!1)),e(y(null)),s(!1)}),3e3));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"modal_wrapper active",id:"delete-modal",onClick:o,children:Object(S.jsxs)("div",{className:"delete_modal-container",children:[!r&&Object(S.jsx)("span",{className:"delete_modal-title",children:"Are you sure you want to delete"}),!r&&Object(S.jsx)("span",{className:"delete_modal-subtitle",children:'"'.concat(t.data.eventName,'" event?')}),r&&Object(S.jsx)("div",{className:"add_modal-no-error ".concat(r&&"booked"),children:Object(S.jsx)("span",{children:"The event has succesfuly deleted."})}),Object(S.jsxs)("div",{className:"delete_modal-footer",children:[Object(S.jsx)("button",{className:"no_delete_event-btn",type:"button",id:"no_delete",onClick:o,children:"No"}),Object(S.jsx)("button",{className:"yes_delete_event-btn",type:"button",id:"yes_delete",onClick:o,children:"Yes"})]})]})})};var I=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.isAuthorized})),n=Object(i.c)((function(e){return e.eventToAdd})),c=Object(i.c)((function(e){return e.eventToDelete})),r=Object(i.c)((function(e){return e.isEventsUpdated})),s=Object(i.c)((function(e){return e.isUsersUpdated})),o=function(){var t=Object(m.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.get("events");case 2:n=t.sent,e(v(n)),e(E(!0));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.useEffect)((function(){s||e((function(e){e({type:"GET_USERS_STARTED"}),fetch("http://158.101.166.74:8080/api/data/pavlo_pechenevskyi/users",{method:"get"}).then((function(e){return e.json()})).then((function(e){return e.map((function(e){return{id:e.id,data:JSON.parse(e.data.replaceAll('\\"','"'))}}))})).then((function(t){return e({type:"GET_USERS_SUCCESS",payload:t})})).catch((function(t){return e(function(e){return{type:"GET_USERS_FAILURE",payload:{error:e}}}(t.message))}))}))}),[s]),Object(a.useEffect)((function(){r||o()}),[r]),s?Object(S.jsxs)("div",{children:[!t&&Object(S.jsx)(M,{}),c&&Object(S.jsx)(z,{}),n&&Object(S.jsx)(R,{}),Object(S.jsx)(U,{}),Object(S.jsx)(L,{})]}):Object(S.jsxs)("div",{children:[Object(S.jsx)("p",{children:"Loading ..."}),Object(S.jsx)("span",{className:"loading-ring"})]})};s.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(i.a,{store:O,children:Object(S.jsx)(I,{})})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.11b0eefc.chunk.js.map