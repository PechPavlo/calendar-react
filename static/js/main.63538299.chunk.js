(this["webpackJsonpcalendar-react"]=this["webpackJsonpcalendar-react"]||[]).push([[0],{16:function(e,t,a){},19:function(e,t,a){},20:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(9),s=a.n(r),i=(a(16),a(2)),d=a.n(i),o=a(4),u=a(3),l=c.a.createContext(null),b=a(11),j=a(0),p=function(e){var t=e.users,a=e.changeUser,c=e.filteredByUser,r=e.changeFilteredByUser,s=e.newEvent,i=e.isAdmin,d=[].concat(Object(b.a)(t.map((function(e){return e.data.name}))),["All"]),o=Object(n.useState)(c),l=Object(u.a)(o,2),p=l[0],m=l[1];return Object(n.useEffect)((function(){m(c)}),[c]),Object(j.jsxs)("div",{className:"main_top-container",children:[Object(j.jsx)("h1",{children:"Calendar-react"}),Object(j.jsxs)("div",{className:"controls",children:[Object(j.jsx)("select",{className:"filtered-by",id:"filter",value:p,onChange:function(e){m(e.target.value),r(e.target.value)},children:d.map((function(e){return Object(j.jsx)("option",{className:"member",value:e,children:"All"===e?"All members":e},"filter-".concat(e))}))}),Object(j.jsx)("button",{className:"change_user-btn",type:"button",onClick:function(){return a()},children:"Change User"}),i&&Object(j.jsx)("button",{className:"add-event-btn",type:"button",onClick:function(){return s()},children:"New event +"})]})]})},m=(a(19),a(5)),h=a(10),f=new function e(){var t=this;if(Object(m.a)(this,e),this.get=function(){var e=Object(o.a)(d.a.mark((function e(a){var n,c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(a),e.prev=1,e.next=4,fetch(n,{method:"get"});case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),this.create=function(){var e=Object(o.a)(d.a.mark((function e(a,n){var c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(a),e.prev=1,e.next=4,fetch(c,{method:"POST",body:n,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return s=e.sent,e.next=7,s.json();case 7:r=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a){return e.apply(this,arguments)}}(),this.change=function(){var e=Object(o.a)(d.a.mark((function e(a,n,c){var r,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(a,"/").concat(n),e.prev=1,e.next=4,fetch(r,{method:"PUT",body:c,headers:{Accept:"application/json","Content-Type":"application/json"}});case 4:return i=e.sent,e.next=7,i.json();case 7:s=e.sent,e.next=13;break;case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(o.a)(d.a.mark((function e(a,n){var c,r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="".concat(t.settingsObject.URL).concat(t.settingsObject.SYSTEM,"/").concat(a,"/").concat(n),e.prev=1,e.next=4,fetch(c,{method:"DELETE"});case 4:return r=e.sent,s=r.status,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",{error:e.t0});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),e.instance instanceof e)return e.instance;this.settingsObject={URL:"http://158.101.166.74:8080/api/data/",SYSTEM:"pavlo_pechenevskyi"},Object.freeze(this.settingsObject),Object.freeze(this),e.instance=this},O=new(function(){function e(t){Object(m.a)(this,e),this.showErrorMessage=function(e){var t=document.querySelector("#error-modal");document.querySelector(".error_modal-subtitle").textContent=e,t.classList.add("active")},this.service=t}return Object(h.a)(e,[{key:"get",value:function(){var e=Object(o.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.get(t);case 2:if(a=e.sent,n=null,!a||!a.error){e.next=6;break}return e.abrupt("return",a);case 6:return a&&(n=a.map((function(e){return{id:e.id,data:JSON.parse(e.data.replaceAll('\\"','"'))}}))),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(o.a)(d.a.mark((function e(t,a){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,this.service.create(t,'{"data":"'.concat(JSON.stringify(a).replaceAll('"','\\"'),'"}'));case 3:if(!(c=e.sent).error){e.next=6;break}return e.abrupt("return",c);case 6:return n.id=c.id,n.data=JSON.parse(c.data.replaceAll('\\"','"')),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"change",value:function(){var e=Object(o.a)(d.a.mark((function e(t,a,n){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={},e.next=3,this.service.change(t,a,'{"data":"'.concat(JSON.stringify(n).replaceAll('"','\\"'),'"}'));case 3:if(!(r=e.sent).error){e.next=6;break}return e.abrupt("return",r);case 6:return c.id=r.id,c.data=JSON.parse(r.data.replaceAll('\\"','"')),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(o.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.service.delete(t,a);case 2:return(n=e.sent).error,console.log(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}())(f),v=function e(t,a,n,c){Object(m.a)(this,e),this.day=t,this.time=a,this.dayTime="".concat(t).concat(a),this.eventName=n,this.participants=c},x=function(e){var t=e.users,a=e.setMembersList,c=Object(n.useState)(!1),r=Object(u.a)(c,2),s=r[0],i=r[1],d=Object(n.useState)({}),o=Object(u.a)(d,2),l=o[0],b=o[1],p=Object(n.useState)([]),m=Object(u.a)(p,2),h=m[0],f=m[1],O=t.map((function(e){return e.data.name})),v=l;Object(n.useEffect)((function(){b(v),O.forEach((function(e){v[e]=!1}))}),[]);var x=function(e){v[e.target.value]=e.target.checked,b(v);var t=O.filter((function(e){return v[e]}));f(t)};return Object(j.jsxs)("div",{className:"add_dropdown ".concat(s&&"active"),"data-drop":"down",children:[Object(j.jsxs)("div",{className:"add_dropdown-main","data-drop":"down",onClick:function(e){i(!s),a(h)},children:[Object(j.jsx)("span",{className:"add_dropdown-selected","data-drop":"down",children:h.length?h.join(", "):"chose participants"}),Object(j.jsx)("select",{className:"add_dropdown-fake_select","data-drop":"down"})]}),Object(j.jsx)("div",{className:"add_dropdown-content","data-drop":"down",children:O.map((function(e){return Object(j.jsxs)("label",{className:"member","data-drop":"down",children:["All"===e?"All members":e,Object(j.jsx)("input",{className:"member-selected-to-add",type:"checkbox",value:e,"data-drop":"down",checked:h.includes(e),onChange:x})]})}))})]})},y=function(e){var t=["Monday","Tuesday","Wednesday","Thursday","Friday"],a=[10,11,12,13,14,15,16,17,18],c=e.users,r=e.setEventToAdd,s=e.setIsEventsUpdated,i=e.myEvents,l=Object(n.useState)(!0),b=Object(u.a)(l,2),p=b[0],m=b[1],h=Object(n.useState)(!1),f=Object(u.a)(h,2),y=f[0],N=f[1],_=Object(n.useState)(t[0]),g=Object(u.a)(_,2),w=g[0],k=g[1],S=Object(n.useState)(a[0]),E=Object(u.a)(S,2),T=E[0],C=E[1],U=Object(n.useState)(""),A=Object(u.a)(U,2),L=A[0],z=A[1],M=Object(n.useState)([]),D=Object(u.a)(M,2),B=D[0],J=D[1],F=function(){var e=Object(o.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"cancel_add"!==t.target.id&&"add-modal"!==t.target.id||r(null),!i.find((function(e){return e.data.dayTime==="".concat(w).concat(T)}))){e.next=6;break}m(!1),e.next=10;break;case 6:return e.next=8,O.create("events",new v(w,T,L,B));case 8:e.sent.error||(N(!0),setTimeout((function(){r(null),s(!1),N(!1)}),3e3));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"modal_wrapper active",id:"add-modal",children:Object(j.jsxs)("div",{className:"add_modal-container",children:[Object(j.jsxs)("div",{className:"add_modal-error ".concat(!p&&"booked"),children:[Object(j.jsx)("span",{children:"Failed to create an event. Time slot is already booked."}),Object(j.jsx)("button",{id:"add_modal-error_btn",onClick:function(){return m(!0)}})]}),Object(j.jsx)("div",{className:"add_modal-no-error ".concat(y&&"booked"),children:Object(j.jsx)("span",{children:"The new event has succesfuly created."})}),Object(j.jsxs)("form",{id:"add-form",onSubmit:F,children:[Object(j.jsxs)("label",{className:"add_lable",children:["Name of the event:",Object(j.jsx)("input",{className:"add_form-name",id:"new_event-name",placeholder:"Event name",type:"text",required:!0,minLength:"1",maxLength:"25",onChange:function(e){return z(e.target.value)}})]}),Object(j.jsxs)("label",{className:"add_lable",htmlFor:"add_select",children:["Participants:",Object(j.jsx)(x,{users:c,setMembersList:J}),Object(j.jsx)("input",{id:"add_select",form:"add-form",required:!0,"data-drop":"down",value:B.length?B.join(", "):""})]}),Object(j.jsxs)("label",{className:"add_lable",children:["Day:",Object(j.jsx)("select",{className:"add_day",defaultValue:w,onChange:function(e){return k(e.target.value)},children:t.map((function(e){return Object(j.jsx)("option",{className:"day",value:e,children:e},"new-day-".concat(e))}))})]}),Object(j.jsxs)("label",{className:"add_lable",children:["Time:",Object(j.jsx)("select",{className:"add_time",defaultValue:T,onChange:function(e){return C(e.target.value)},children:a.map((function(e){return Object(j.jsx)("option",{className:"time",value:e,children:"".concat(e,":00")},"new-time-".concat(e))}))})]})]}),Object(j.jsxs)("div",{className:"add_modal-footer",children:[Object(j.jsx)("button",{className:"cancel_add_event-btn",id:"cancel_add",onClick:F,children:"Cancel"}),Object(j.jsx)("button",{className:"create_add_event-btn",id:"create_add",form:"add-form",type:"submit",children:"Create"})]})]})})},N=function(e){var t=Object(n.useContext)(l),a=t.myEvents,c=t.currentUser,r=t.setEventToDelete,s=t.filteredByUser,i=e.dayTime,d=null===a||void 0===a?void 0:a.find((function(e){return e.data.dayTime===i})),o=null===d||void 0===d?void 0:d.data.participants.includes(s),u=c.data.isAdmin;return d&&(o||"All"===s)?Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"calendar_cell booked","data-cell":i,children:[Object(j.jsx)("span",{className:"calendar_cell-name","data-cell_name":i,children:d.data.eventName}),u&&Object(j.jsx)("button",{className:"calendar_cell-del_btn","data-del_btn":i,type:"button",onClick:function(){return r(d)},children:"\u2716"})]}),Object(j.jsx)("ul",{className:"calendar_cell_participants","data-cell_list":i,children:d.data.participants.map((function(e){return Object(j.jsx)("li",{className:"calendar_cell_participant",children:e},"".concat(i,"-").concat(e))}))})]}):Object(j.jsx)("div",{})},_=function(){var e=["Monday","Tuesday","Wednesday","Thursday","Friday"];return Object(j.jsxs)("table",{className:"calendar",children:[Object(j.jsx)("thead",{children:Object(j.jsx)("tr",{className:"calendar-header",children:["Name"].concat(e).map((function(e){return Object(j.jsx)("th",{className:"calendar_header-item",children:e},"thead-".concat(e))}))})}),Object(j.jsx)("tbody",{children:[10,11,12,13,14,15,16,17,18].map((function(t){return Object(j.jsx)("tr",{className:"calendar-row",children:["Name"].concat(e).map((function(e){return"Name"===e?Object(j.jsx)("td",{className:"calendar_row-item",children:"".concat(t,":00")},"tbody-".concat(t)):Object(j.jsx)("td",{className:"calendar_row-item",draggable:"true","data-time":"".concat(e).concat(t),children:Object(j.jsx)(N,{dayTime:"".concat(e).concat(t)})},"tbody-".concat(e).concat(t))}))},"tbody-tr-".concat(t))}))})]})},g=function(e){var t=e.users,a=e.currentUser,c=e.setAuthorizedUser,r=Object(n.useState)(a.data.name),s=Object(u.a)(r,2),i=s[0],d=s[1];Object(n.useEffect)((function(){d(a.data.name)}),[a]);return Object(j.jsx)("div",{className:"modal_wrapper active",id:"authorize-modal",children:Object(j.jsxs)("div",{className:"authorize_modal-container",children:[Object(j.jsx)("span",{className:"authorize_modal-title",children:"Please authorize"}),Object(j.jsx)("select",{className:"autorized-by",value:i,onChange:function(e){d(e.target.value)},children:null===t||void 0===t?void 0:t.map((function(e){return Object(j.jsx)("option",{className:"user",value:e.data.name,children:e.data.name},e.id)}))}),Object(j.jsx)("div",{className:"authorize_modal-footer",children:Object(j.jsx)("button",{className:"confirm_authorize_modal-btn",id:"confirm_user",type:"button",onClick:function(){return c(i)},children:"Confirm"})})]})})},w=function(e){var t=e.eventToDelete,a=e.setIsEventsUpdated,c=Object(n.useContext)(l).setEventToDelete,r=Object(n.useState)(!1),s=Object(u.a)(r,2),i=s[0],b=s[1],p=function(){var e=Object(o.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("no_delete"!==n.target.id&&"delete-modal"!==n.target.id||c(null),"yes_delete"!==n.target.id){e.next=6;break}return e.next=4,O.delete("events",t.id);case 4:e.sent.error||(b(!0),setTimeout((function(){a(!1),c(null),b(!1)}),3e3));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)("div",{className:"modal_wrapper active",id:"delete-modal",onClick:p,children:Object(j.jsxs)("div",{className:"delete_modal-container",children:[!i&&Object(j.jsx)("span",{className:"delete_modal-title",children:"Are you sure you want to delete"}),!i&&Object(j.jsx)("span",{className:"delete_modal-subtitle",children:'"'.concat(t.data.eventName,'" event?')}),i&&Object(j.jsx)("div",{className:"add_modal-no-error ".concat(i&&"booked"),children:Object(j.jsx)("span",{children:"The event has succesfuly deleted."})}),Object(j.jsxs)("div",{className:"delete_modal-footer",children:[Object(j.jsx)("button",{className:"no_delete_event-btn",type:"button",id:"no_delete",onClick:p,children:"No"}),Object(j.jsx)("button",{className:"yes_delete_event-btn",type:"button",id:"yes_delete",onClick:p,children:"Yes"})]})]})})};var k=function(){var e=[{id:"a6a136dc-fd2b-4073-a1ae-214589cc73e6",data:{isAdmin:!0,name:"test",password:""}}],t=Object(n.useState)([].concat(e)),a=Object(u.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)([]),i=Object(u.a)(s,2),b=i[0],m=i[1],h=Object(n.useState)(null),f=Object(u.a)(h,2),v=f[0],x=f[1],N=Object(n.useState)(null),k=Object(u.a)(N,2),S=k[0],E=k[1],T=Object(n.useState)(!1),C=Object(u.a)(T,2),U=C[0],A=C[1],L=Object(n.useState)(!1),z=Object(u.a)(L,2),M=z[0],D=z[1],B=Object(n.useState)(!0),J=Object(u.a)(B,2),F=J[0],Y=J[1],I=Object(n.useState)(e[0]),P=Object(u.a)(I,2),R=P[0],q=P[1],V=Object(n.useState)("All"),W=Object(u.a)(V,2),G=W[0],H=W[1],K=function(){var e=Object(o.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("users");case 2:t=e.sent,q(t[0]),r(t),D(!0),Y(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(o.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("events");case 2:t=e.sent,m(t),A(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){M||K()}),[M]),Object(n.useEffect)((function(){U||Q()}),[U]),M?Object(j.jsxs)(l.Provider,{value:{myEvents:b,currentUser:R,setEventToDelete:x,filteredByUser:G},children:[!F&&Object(j.jsx)(g,{users:c,currentUser:R,setAuthorizedUser:function(e){Y(!0),q(c.find((function(t){return t.data.name===e})))}}),v&&Object(j.jsx)(w,{eventToDelete:v,setIsEventsUpdated:A}),S&&Object(j.jsx)(y,{users:c,setEventToAdd:E,setIsEventsUpdated:A,myEvents:b}),Object(j.jsx)(p,{isAdmin:R.data.isAdmin,users:c,changeUser:function(){Y(!1)},changeFilteredByUser:function(e){H(e)},newEvent:function(){E("some")},filteredByUser:G}),Object(j.jsx)(_,{})]}):Object(j.jsxs)("div",{children:[Object(j.jsx)("p",{children:"Loading ..."}),Object(j.jsx)("span",{className:"loading-ring"})]})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(k,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.63538299.chunk.js.map